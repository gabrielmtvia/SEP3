@page "/Cart"
@inherits CartBase

<h3>Shopping Cart</h3>

@if (ShoppingCartItems == null || ShoppingCartItems.Count == 0)
{
    <span>@message</span>
}
else
{
    <span>@message</span>
    <div>
        <div>
            <button class="btn btn-primary" @onclick="CheckOut">
                <i class="oi oi-basket">Checkout</i>
                </button>
        </div>
        @foreach (var product in ShoppingCartItems)
        {
            <div class="container">
                <div class="image-wrapper">
                    <img src="@product.ImageUrl" class="image"/>
                </div>
                <div class="name">
                    <h5><a href="/BookDetails/@product.Isbn">@product.Title</a></h5>
                    <button class="btn btn-danger" @onclick="@(()=>RemoveProductFromCart(product.Isbn, product.Quantity))">Remove from cart</button>
                </div>
                <div class="cart-product-price">$@product.Price</div>
                <div class="cart-product-quantity">Quantity: @product.Quantity</div>
            </div>
        }
        <div class="cart-product-price">
            Total (@ShoppingCartItems.Count): $@ShoppingCartItems.Sum(items => @items.Price)
        </div>
    </div>
}



